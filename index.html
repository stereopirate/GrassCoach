<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Grass Coach - Strategy. Not Guesswork.</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root { --forest: #1B3022; --gold: #D4AF37; --turf: #F5F5F5; }
        body { background: var(--turf); font-family: sans-serif; }
        .coach-card { background: white; border-bottom: 4px solid var(--forest); border-radius: 1rem; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // ==================== THE GLOBAL EQUIPMENT LIBRARY ====================
        const EQUIPMENT_LIBRARY = {
            mowers: [
                { id: 'm1', brand: 'Craftsman', name: 'M215', type: 'Gas Push', maintenance: { oil: 50, blade: 25 } },
                { id: 'm2', brand: 'Honda', name: 'HRX217', type: 'Gas Self-Propelled', maintenance: { oil: 100, blade: 50 } },
                { id: 'm3', brand: 'EGO', name: 'LM2130SP', type: 'Battery', maintenance: { blade: 50 } }
            ],
            spreaders: [
                { id: 's1', brand: 'Scotts', name: 'Elite Spreader', type: 'Broadcast', ratio: 1.2 },
                { id: 's2', brand: 'Echo', name: 'RB-60', type: 'Broadcast', ratio: 0.9 },
                { id: 's3', brand: 'Scotts', name: 'Whirl', type: 'Handheld', ratio: 2.5 }
            ]
        };

        const LawnCareTracker = () => {
            const [equipment, setEquipment] = useState(() => JSON.parse(localStorage.getItem('gc_shed') || '[]'));
            const [activities, setActivities] = useState(() => JSON.parse(localStorage.getItem('gc_activities') || '[]'));
            const [view, setView] = useState('dashboard');

            useEffect(() => {
                localStorage.setItem('gc_shed', JSON.stringify(equipment));
                localStorage.setItem('gc_activities', JSON.stringify(activities));
            }, [equipment, activities]);

            // ==================== MAINTENANCE LOGIC ====================
            const getMaintenanceStatus = (tool) => {
                if (!tool.maintenance) return null;
                // Logic: Compare tool.hoursUsed against tool.maintenance thresholds
                return tool.hoursUsed >= tool.maintenance.oil ? "üî¥ Needs Oil" : "üü¢ Clear";
            };

            // ==================== THE SHED VIEW ====================
            const ShedView = () => {
                const [search, setSearch] = useState('');
                const [isAdding, setIsAdding] = useState(false);

                const addToShed = (model) => {
                    setEquipment([...equipment, { ...model, id: Date.now(), hoursUsed: 0 }]);
                    setIsAdding(false);
                };

                return (
                    <div className="p-4 max-w-md mx-auto">
                        <header className="flex justify-between items-center mb-6">
                            <h2 className="text-2xl font-black text-[#1B3022] italic uppercase">The Shed</h2>
                            <button onClick={() => setView('dashboard')} className="text-xs font-bold text-gray-400">EXIT</button>
                        </header>

                        {!isAdding ? (
                            <button onClick={() => setIsAdding(true)} className="w-full py-4 mb-6 border-2 border-dashed border-gray-300 rounded-2xl text-gray-400 font-bold">
                                + Add Gear from Library
                            </button>
                        ) : (
                            <div className="bg-white p-4 rounded-2xl shadow-xl mb-6 border-2 border-[#1B3022]">
                                <input 
                                    placeholder="Search Library (e.g. Honda)..." 
                                    className="w-full p-3 bg-gray-100 rounded-lg mb-4 outline-none"
                                    onChange={(e) => setSearch(e.target.value.toLowerCase())}
                                />
                                <div className="max-h-60 overflow-y-auto space-y-2">
                                    {[...EQUIPMENT_LIBRARY.mowers, ...EQUIPMENT_LIBRARY.spreaders]
                                        .filter(m => m.brand.toLowerCase().includes(search) || m.name.toLowerCase().includes(search))
                                        .map(model => (
                                            <div key={model.id} onClick={() => addToShed(model)} className="p-3 border rounded-lg flex justify-between cursor-pointer hover:bg-gray-50">
                                                <span className="font-bold text-sm">{model.brand} {model.name}</span>
                                                <span className="text-[10px] bg-gray-100 px-2 py-1 rounded uppercase font-black">{model.type}</span>
                                            </div>
                                        ))
                                    }
                                </div>
                                <button onClick={() => setIsAdding(false)} className="w-full mt-4 text-xs font-bold text-gray-400">CANCEL</button>
                            </div>
                        )}

                        <div className="space-y-4">
                            {equipment.map(tool => (
                                <div key={tool.id} className="bg-white p-4 rounded-2xl flex justify-between items-center shadow-sm">
                                    <div>
                                        <p className="text-[10px] font-black text-[#D4AF37] uppercase">{tool.brand}</p>
                                        <p className="font-bold text-[#1B3022]">{tool.name}</p>
                                        {tool.maintenance && (
                                            <p className="text-[9px] font-bold text-green-600 mt-1 uppercase">‚úì Maintenance Tracked</p>
                                        )}
                                    </div>
                                    <button onClick={() => setEquipment(equipment.filter(x => x.id !== tool.id))} className="text-red-200">‚úï</button>
                                </div>
                            ))}
                        </div>
                    </div>
                );
            };

            return (
                <div className="min-h-screen">
                    {view === 'dashboard' ? (
                        <div className="p-4 max-w-md mx-auto">
                            <h1 className="text-3xl font-black text-[#1B3022] italic mb-8">GRASS COACH</h1>
                            
                            <div className="coach-card p-6 mb-8 cursor-pointer" onClick={() => setView('shed')}>
                                <div className="flex justify-between items-center">
                                    <div>
                                        <p className="text-[10px] font-black text-gray-400 uppercase tracking-widest">Active Fleet</p>
                                        <p className="text-2xl font-black text-[#1B3022]">{equipment.length} Tools</p>
                                    </div>
                                    <span className="text-2xl">üöú</span>
                                </div>
                                <div className="mt-4 pt-4 border-t border-gray-100 flex gap-2">
                                    {equipment.some(t => t.maintenance) ? (
                                        <span className="text-[10px] font-bold bg-green-100 text-green-700 px-2 py-1 rounded">ALL SYSTEMS NOMINAL</span>
                                    ) : (
                                        <span className="text-[10px] font-bold bg-gray-100 text-gray-400 px-2 py-1 rounded">ADD GEAR TO START TRACKING</span>
                                    )}
                                </div>
                            </div>

                            <button className="w-full py-5 bg-[#1B3022] text-[#D4AF37] rounded-2xl font-black text-lg uppercase shadow-xl active:scale-95 transition-all">
                                Log Activity +
                            </button>
                        </div>
                    ) : <ShedView />}

                    <nav className="fixed bottom-0 left-0 right-0 bg-white border-t px-8 py-5 flex justify-between items-center">
                        <button onClick={() => setView('dashboard')} className="text-xl">üè†</button>
                        <button onClick={() => setView('shed')} className="text-xl">üöú</button>
                    </nav>
                </div>
            );
        };

        ReactDOM.render(<LawnCareTracker />, document.getElementById('root'));
    </script>
</body>
</html>
